@using CI_Platfrom.Entities.Models.ViewModel
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@



@{
    Layout = "~/Views/Shared/_StoryHeader.cshtml";
}

@model StoryVM

<style>
            .mission-img {
                            width: 100%;
                            height: 100%;
                            object-fit: cover;
                         }

            .demo {
                      width: 700px;
                  }

              .orage_color{
            border: 2px solid #F88634;
            color:#F88634;
        }
</style>
    <div class="container">

        <!-- photo container and detais of the mission -->
        <div class="row">

            @*
                <div class="col-md-6 col-12">

               <div class="mySlides h-75 d-none">
                    <img src="~/images/CSR-initiative-stands-for-Coffee--and-Farmer-Equity-2.png" class="mission-img">
                </div>

                <div class="mySlides h-75 d-none">
                    <img src="~/images/img1.png" class="mission-img">
                </div>

                <div class="mySlides h-75 d-none">
                    <img src="~/images/img11.png" class="mission-img">
                </div>

                <div class="mySlides h-75 d-none">
                    <img src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-2.png" class="mission-img">
                </div>
                <div class="mySlides h-75 d-none">
                    <img src="~/images/CSR-initiative-stands-for-Coffee--and-Farmer-Equity-2.png" class="mission-img">
                </div>
                <div class="mySlides h-75 d-none">
                    <img src="~/images/img11.png" class="mission-img">
                </div>

                <!-- Thumbnail images -->
                <div id="recipeCarousel" class="carousel slide d-none d-sm-block" data-bs-ride="carousel">
                    <div class="carousel-inner" role="listbox">
                        <div class="carousel-item active">
                            <div class="col-md-3">
                                <div class="card">
                                    <div class="card-img">
                                        <img src="~/images/CSR-initiative-stands-for-Coffee--and-Farmer-Equity-2.png"
                                            class="img-fluid cursor demo" onclick="currentSlide(1)">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="col-md-3">
                                <div class="card">
                                    <div class="card-img">
                                        <img src="~/images/img1.png" class="img-fluid cursor demo"
                                            onclick="currentSlide(2)">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="col-md-3">
                                <div class="card">
                                    <div class="card-img">
                                        <img src="~/images/img11.png" class="img-fluid cursor demo"
                                            onclick="currentSlide(3)">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="col-md-3">
                                <div class="card">
                                    <div class="card-img">
                                        <img src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-2.png"
                                            class="img-fluid cursor demo" onclick="currentSlide(4)">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="col-md-3">
                                <div class="card">
                                    <div class="card-img">
                                        <img src="~/images/CSR-initiative-stands-for-Coffee--and-Farmer-Equity-2.png"
                                            class="img-fluid cursor demo" onclick="currentSlide(5)">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="col-md-3">
                                <div class="card">
                                    <div class="card-img">
                                        <img src="~/images/img11.png" class="img-fluid cursor demo"
                                            onclick="currentSlide(6)">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a class="carousel-control-prev bg-transperent w-auto" href="#recipeCarousel" role="button"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    </a>
                    <a class="carousel-control-next bg-transperent w-auto" href="#recipeCarousel" role="button"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    </a>
                </div>
                
                
                <div class="d-sm-none mt-3">

                    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                                aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                                aria-label="Slide 2"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                                aria-label="Slide 3"></button>
                        </div>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="~/images/CSR.png" class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="~/images/Grow-Trees-On-the-path-to-environment-sustainability-login.png" class="d-block w-100" alt="...">
                            </div>
                            <div class="carousel-item">
                                <img src="~/images/image2.png" class="d-block w-100" alt="...">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                    
                    </div>
                    
                </div>*@

                 <script>
                        function display(item) {
                        let image = document.getElementById("image-area");
                        image.src = item.src;
                        }
                  </script>
    
                <div class="col-md-6 col-12 d-none d-sm-block">
           
                <img src="@Model.storyById.StoryMedia.FirstOrDefault(m => m.Type == "PNG").Path"  id="image-area" class="w-100 ImageCarousel"/>
            <div id="carousel-bottom" class="carousel slide">
                <div class="carousel-inner">


                    @{
                        var StoryImgMedia = Model.storyById.StoryMedia.ToList();
                        var ImgMediaCount = StoryImgMedia.Count();
                        int numCarousels = (int)Math.Ceiling((double)ImgMediaCount / 4);
                    }
                                      
                    @for (var j = 0; j < numCarousels; j++)
                    {
                        <div class="carousel-item @((j == 0) ? "active" : "")">
                            <div class="row d-flex">
                                @foreach (var media in StoryImgMedia.Skip(j * 4).Take(4))
                                {
                                    <div class="col-3 p-1">
                                        <img src="@media.Path"
                                     class="bd-placeholder-img bd-placeholder-img-lg d-block1 w-100"
                                     width="100%"
                                     height="100%"
                                     role="img"
                                     onclick="display(this)">
                                    </div>
                                }
                            </div>
                        </div>
                    }
                </div>
                <button class="carousel-control-prev w-auto ps-2 pe-2 bg-black bg-opacity-50 mt-2 mb-2"
                        type="button" data-bs-target="#carousel-bottom" data-bs-slide="prev">
                    <img src="~/images/left1.png" aria-hidden="true" />
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next w-auto ps-2 pe-2 bg-black bg-opacity-50  mt-2 mb-2"
                        type="button" data-bs-target="#carousel-bottom" data-bs-slide="next">
                    <img src="~/images/right-arrow2.png" aria-hidden="true" />
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>

        <div class="d-sm-none mt-3">

                    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="@Model.storyById.StoryMedia.FirstOrDefault().Path" height="230px" class="d-block w-100" alt="...">                                
                            </div> 

                            @foreach (var item in @Model.storyById.StoryMedia)
                            {
                                <div class="carousel-item">
                                    <img src="@item.Path" class="d-block w-100" height="230px" alt="...">
                                </div>                                
                            }
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                    
        </div>
       @* @{
            var storyfromId = @Model.storyById.FirstOrDefault();
        }*@
      <div class="col-md-6 col-sm-12 mb-2">
        <div class="mt-3 mt-sm-0">
          <div>
            <img src="@Model.storyById.User.Avatar" class="rounded-circle" height="" alt="">
            <div class="d-flex justify-content-between align-items-center text-center">
              <span class="p-2">@Model.storyById.User.FirstName @Model.storyById.User.LastName</span>
              <div class="border border-1 rounded-pill pe-3 py-2">
                <img src="~/images/eye.png" class="ps-3" alt="">
                <span class="p-2">
                 @* @Model.ParticularStoryViewers views*@
                 @Model.storyById.StoryViews
                </span>
              </div>
            </div>
          </div>

          <p class="mt-4">
           @* @Html.Raw(@storyfromId.Description)*@
           @Model.storyById.User.WhyIVolunteer
           
          </p>

          <div class="row flex-row justify-content-between align-items-center mt-4">
            <div class="col">
              <button class="d-flex flex-row align-items-center justify-content-center border border-2 border-dark rounded-pill p-3" data-bs-toggle="modal" data-bs-target="#RecomendModal">
                <img src="~/images/add1.png" alt="" width="22px" height="22px" />
                <span class="ms-2">Recommend to a Co-Worker</span>
              </button>
            </div>

            <div class="col">
              <div class="align-items-center justify-content-center">
                <div class="mt-2  w-100 text-center ">
                  <a asp-action="VolunteeringPage" asp-controller="Mission" asp-route-id="@Model.storyById.MissionId" class="btn orage_color rounded-pill text-center btn_nos py-3 px-5">Open Mission<img src="~/images/right-arrow.png" class="ms-4"></a>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div> 



 </div>



 <div>
     <h1>@Model.storyById.Title</h1>
     <hr/>
     <div>
         @Html.Raw(@Model.storyById.Description)
     </div>


     
 </div>


        </div>


        
                <!-- Recommendation Modal -->
            <div class="modal fade " id="RecomendModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Recommendation to co-worker</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                      @{var users = @Model.User.Where(e => e.UserId != @Model.user.UserId).ToList();
                              foreach (var item in users)
                              
                                {
                                    <div class="d-flex flex-row justify-content-between mt-1">
                                        <div class="d-flex flex-row gap-2">
                                            <img src="~/images/volunteer1.png" class="rounded-circle" width="30px" height="30px" />
                                            <span>@item.FirstName  @item.LastName</span>
                                        </div>
                                        <div id="RecommendationDiv">
                                            <button type="button" value="@Model.storyById.StoryId @Model.user.UserId @item.UserId @item.Email"  onclick="recomendtoyourfriend()" class="btn btn-primary ">Recommend </button>
                                        </div>
                                    </div>
                       
                                }
                                }
                            </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                  </div>
                </div>
              </div>
            </div>



 

      


       




        

   







                <!-- Recommendation Modal -->
           @* <div class="modal fade " id="RecomendModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Recommendation to co-worker</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                                @foreach( var item in Model.User)
                                {
                                    <div class="d-flex flex-row justify-content-between mt-1">
                                        <div class="d-flex flex-row gap-2">
                                            <img src="~/images/volunteer1.png" class="rounded-circle" width="30px" height="30px" />
                                            <span>@item.FirstName  @item.LastName</span>
                                        </div>
                                        <div id="RecommendationDiv">
                                            <button type="button" value="@Model.particularMission.MissionId @Model.user.UserId @item.UserId @item.Email" onclick="recomendtoyourfriend()" class="btn btn-primary ">Recommend </button>
                                        </div>
                                    </div>
                       
                                }
                            </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                  </div>
                </div>
              </div>
            </div>*@













    <script>

        function openNav() {
            document.getElementById("mySidebar").style.width = "275px";
            document.getElementById("main").style.marginLeft = "275px";
            document.getElementById("openbtn").style.display = "none";
            document.getElementById("menubr").style.display = "none";
            document.getElementById("img_user").onload = function () { displayNone() };
            document.getElementById("img_user").style.display = "block";

        }

        function closeNav() {
            document.getElementById("mySidebar").style.width = "0";
            document.getElementById("main").style.marginLeft = "0";
            document.getElementById("openbtn").style.display = "block";
            document.getElementById("menubr").style.display = "block";
        }
    </script>

   
   
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="~/js/storyDetailPage.js" ></script>

   

 
   
